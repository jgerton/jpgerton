---
phase: 04-admin-dashboard
plan: 07
type: execute
wave: 5
depends_on: ["04-05", "04-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Jon can log in and access protected admin dashboard"
    - "Dashboard shows contact submissions with working status workflow"
    - "Projects can be created, edited, deleted, and reordered"
    - "Changes in admin appear on public site immediately"
  artifacts: []
  key_links: []
---

<objective>
Verify all admin functionality works end-to-end.

Purpose: Ensure Phase 4 requirements are met before marking complete.
Output: Verified working admin dashboard ready for use.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete admin dashboard with authentication, project management, and contact triage</what-built>
  <how-to-verify>
**Setup (one-time):**
1. Ensure AUTH_SECRET env var is set (generate with: openssl rand -base64 32)
2. Ensure SITE_URL env var is set to http://localhost:3400
3. Create an admin user in Convex dashboard or via seed script

**Authentication Flow:**
1. Visit http://localhost:3400/admin
2. Should redirect to /login
3. Enter admin credentials
4. Should redirect to /admin dashboard
5. Verify 7-day session: close browser, reopen, still logged in

**Dashboard Home:**
1. Visit http://localhost:3400/admin
2. Verify quick stats display (unread count, project count)
3. Verify recent contacts list shows latest submissions
4. Click "View All" or tab to contacts page

**Contact Management:**
1. Navigate to Contacts tab
2. Verify contacts sorted: unread at top, then read, then responded
3. Click a contact row - should expand to show full message
4. Mark as read - verify status badge changes
5. Select multiple contacts with checkboxes
6. Click "Archive Selected" - verify they disappear from main list
7. Change a contact to "Responded" status

**Project Management:**
1. Navigate to Projects tab
2. Verify existing projects display in sortable list
3. Drag a project row up/down - verify order saves
4. Click "Add Project"
5. Fill all fields including uploading an image
6. Save - verify new project appears in list
7. Click Edit on a project
8. Change description and save
9. Open public site /projects - verify changes appear
10. Back in admin, delete a project (confirm dialog should appear)
11. Confirm delete - verify project removed from public site

**Dark Mode:**
1. Toggle dark mode in admin header
2. Verify admin interface switches themes
3. Verify it matches the distinct "backstage" aesthetic

**Edge Cases:**
- Try accessing /admin/projects directly when not logged in (should redirect to login)
- Submit empty required fields in project form (should show validation errors)
- Try bulk archive with no selection (button should be disabled or hidden)
  </how-to-verify>
  <resume-signal>Type "verified" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
- [ ] Login redirects work (protected -> /login, authenticated /login -> /admin)
- [ ] 7-day session persists across browser restarts
- [ ] Dashboard shows accurate stats and recent contacts
- [ ] Contact four-state workflow functional
- [ ] Bulk archive works
- [ ] Project CRUD all functional
- [ ] Drag-to-reorder saves new order
- [ ] Image upload works
- [ ] Delete confirmation prevents accidents
- [ ] Public site reflects admin changes immediately
- [ ] Dark mode works in admin
</verification>

<success_criteria>
All Phase 4 requirements verified:
- ADMIN-01: Protected admin routes - working
- ADMIN-02: Convex Auth login - working with 7-day sessions
- ADMIN-03: Dashboard home - shows stats and recent contacts
- ADMIN-04: Projects CRUD - create, read, update, delete all work
- ADMIN-05: Project reordering - drag-and-drop functional
- ADMIN-06: Contact submissions - list, read/archive, bulk actions work
</success_criteria>

<output>
After verification passes, create `.planning/phases/04-admin-dashboard/04-07-SUMMARY.md`
</output>
