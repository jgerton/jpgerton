---
phase: 19-launch-prep-tech-debt
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/opengraph-image.tsx
  - app/robots.ts
  - app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Default OG image (1200x630) appears on all pages without post-specific images"
    - "Robots.txt disallows only /admin/, allows all other paths"
    - "Sitemap reference included in robots.txt"
    - "noindex meta tag not present in production builds"
  artifacts:
    - path: "app/opengraph-image.tsx"
      provides: "Default site-wide OG image via ImageResponse"
      exports: ["default", "size", "contentType"]
    - path: "app/robots.ts"
      provides: "Updated robots.txt with only /admin/ disallowed"
      exports: ["default"]
  key_links:
    - from: "app/opengraph-image.tsx"
      to: "Next.js metadata system"
      via: "file-convention (opengraph-image.tsx at route root)"
      pattern: "export default.*Image"
    - from: "app/layout.tsx"
      to: "app/opengraph-image.tsx"
      via: "metadata inheritance (file-convention replaces static openGraph.images)"
      pattern: "metadataBase"
---

<objective>
Create the default site-wide OG image and finalize SEO configuration for launch.

Purpose: Every page that does not have its own opengraph-image.tsx (all pages except blog/[slug]) needs a professional OG image for social sharing. Robots.txt needs to be updated to allow crawling of all public routes.

Output: Root-level opengraph-image.tsx, updated robots.ts, cleaned layout.tsx metadata
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-launch-prep-tech-debt/19-CONTEXT.md
@.planning/phases/19-launch-prep-tech-debt/19-RESEARCH.md
@app/blog/[slug]/opengraph-image.tsx
@app/robots.ts
@app/layout.tsx
@lib/site-config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create default OG image and update layout metadata</name>
  <files>app/opengraph-image.tsx, app/layout.tsx</files>
  <action>
Create `app/opengraph-image.tsx` using the ImageResponse pattern matching the existing blog OG image style (same gradient: `linear-gradient(135deg, #003F75 0%, #2884BD 100%)`).

Content per user decisions (LOCKED):
- Name: "Jon Gerton" (large, top)
- Tagline: "Custom Websites for $500" (prominent, middle)
- URL: "jpgerton.com" (subtle footer, lower opacity)

Implementation details:
- Export `size = { width: 1200, height: 630 }` and `contentType = "image/png"`
- Use system fonts only (sans-serif) to stay under 500KB bundle limit
- Use flexbox layout (no CSS Grid - ImageResponse limitation)
- Use inline styles only (no Tailwind, no CSS variables)
- Keep the design minimal and professional - understated, not flashy
- Match the color palette of the existing blog/[slug]/opengraph-image.tsx fallback

Then update `app/layout.tsx` metadata:
- Remove the static `images` array from `openGraph` object (the file-convention `opengraph-image.tsx` automatically provides this)
- Remove the static `images` array from `twitter` object (same reason)
- Keep all other metadata fields (metadataBase, title, description, keywords, etc.)
- The `robots: { index: process.env.NODE_ENV === "production", follow: true }` is already correct - leave it

Also delete `public/og-image-README.md` since it's now replaced by the dynamic image.
  </action>
  <verify>
Run `bun run type-check` to confirm no TypeScript errors. Run `bun run build` and check the build output includes the opengraph-image route. Verify the layout.tsx no longer references `/og-image.jpg`.
  </verify>
  <done>
Root-level opengraph-image.tsx exists and exports a 1200x630 PNG with "Jon Gerton", "Custom Websites for $500", and "jpgerton.com". Layout metadata no longer has static OG image references. Build succeeds.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update robots.ts to allow all public routes</name>
  <files>app/robots.ts</files>
  <action>
Update `app/robots.ts` to disallow only `/admin/` per user decision (LOCKED).

Current state disallows: `/admin/`, `/api/`, `/login`
New state disallows: `/admin/` only

Keep the existing BASE_URL pattern and sitemap reference. The file is small so this is a straightforward edit:

```typescript
import type { MetadataRoute } from "next";

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || "https://jpgerton.com";

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: "*",
      allow: "/",
      disallow: ["/admin/"],
    },
    sitemap: `${BASE_URL}/sitemap.xml`,
  };
}
```
  </action>
  <verify>
Run `bun run type-check`. Run `bun run build` to confirm robots.ts compiles without errors. Verify the output only disallows /admin/.
  </verify>
  <done>
Robots.txt disallows only /admin/, allows all other paths, includes sitemap reference.
  </done>
</task>

</tasks>

<verification>
1. `bun run type-check` passes
2. `bun run build` succeeds
3. `app/opengraph-image.tsx` exists with correct exports (size, contentType, default)
4. `app/layout.tsx` metadata.openGraph does NOT contain `images` array
5. `app/robots.ts` disallow list contains only `/admin/`
6. `public/og-image-README.md` is deleted
</verification>

<success_criteria>
- Default OG image generates a 1200x630 PNG with branding, tagline, and URL
- Blog post OG images still override the default (existing behavior preserved)
- Robots.txt allows all public routes, blocks only /admin/
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/19-launch-prep-tech-debt/19-01-SUMMARY.md`
</output>
