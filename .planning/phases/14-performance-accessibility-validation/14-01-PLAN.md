---
phase: 14-performance-accessibility-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
  - app/(home)/page.tsx
  - app/services/page.tsx
  - app/about/page.tsx
  - app/contact/page.tsx
  - app/projects/page.tsx
  - app/projects/[slug]/page.tsx
  - components/portfolio/sections/hero-with-gradient.tsx
  - components/portfolio/sections/cta-banner.tsx
  - components/portfolio/sections/section-background.tsx
  - components/portfolio/social-proof-display.tsx
  - components/portfolio/testimonial-card.tsx
  - components/portfolio/case-study-visual.tsx
  - components/forms/contact-form.tsx
  - components/navigation/site-nav.tsx
autonomous: true

must_haves:
  truths:
    - "All pages pass automated axe-core accessibility checks with zero critical/serious violations"
    - "All text meets WCAG AA contrast ratio (4.5:1 text, 3:1 UI) in light mode"
    - "Every page uses semantic HTML landmarks (main, nav, section, article, header, footer)"
    - "ARIA attributes are correct and not redundant with semantic HTML"
  artifacts:
    - path: ".planning/phases/14-performance-accessibility-validation/14-01-audit-results.md"
      provides: "Audit findings, fixes applied, and remaining items"
    - path: "app/globals.css"
      provides: "Any contrast or styling fixes"
  key_links:
    - from: "axe-core automated checks"
      to: "code fixes in components/pages"
      via: "Lighthouse accessibility audit"
      pattern: "contrast|aria|semantic"
---

<objective>
Run a comprehensive WCAG 2.1 AA accessibility audit across all public pages using Lighthouse and axe-core automated checks, then fix every issue found.

Purpose: Catch accessibility regressions introduced during Phases 8-13 design polish. Phases 8 and 10 validated contrast and semantic HTML, but Phases 11-13 added new components and page structures that may have introduced violations.

Output: All public pages passing automated accessibility checks with zero critical/serious violations. Audit results documented.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-performance-accessibility-validation/14-CONTEXT.md
@.planning/phases/14-performance-accessibility-validation/14-RESEARCH.md
@app/globals.css
@components/navigation/site-nav.tsx
@components/navigation/mobile-menu.tsx
@components/forms/contact-form.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run automated accessibility audit on all public pages</name>
  <files>
    .planning/phases/14-performance-accessibility-validation/14-01-audit-results.md
  </files>
  <action>
    Build the project to ensure it compiles cleanly:
    ```
    docker compose up -d
    ```
    Wait for the dev server to be ready at http://localhost:3400.

    Then use the Chrome extension to audit each public page. For each page:
    1. Navigate to the page via `/chrome navigate http://localhost:3400{path}`
    2. Take a screenshot to verify the page loaded
    3. Inspect the page for console errors and DOM issues via `/chrome inspect`

    Pages to audit (in order):
    - http://localhost:3400 (home)
    - http://localhost:3400/projects
    - http://localhost:3400/services
    - http://localhost:3400/about
    - http://localhost:3400/contact

    For each page, document:
    - Semantic HTML structure: verify main, nav, section landmarks exist
    - ARIA usage: check for redundant or incorrect ARIA (e.g., role="navigation" on a <nav>)
    - Image alt text: verify all images have descriptive alt text
    - Form labels: verify all form inputs have associated labels
    - Heading hierarchy: verify headings follow logical order (h1 > h2 > h3, no skips)
    - Link text: verify no "click here" or ambiguous link text

    Additionally, grep the codebase for common accessibility anti-patterns:
    - `tabindex` values greater than 0 (disrupts natural tab order)
    - Missing `alt` on `<img>` or `<Image>` tags
    - `<a>` tags with `target="_blank"` missing `rel="noopener noreferrer"` (already good in project)
    - `<div>` or `<span>` used as buttons without `role="button"` and keyboard handlers
    - Color values that might fail contrast (grep for opacity values on text)

    Write findings to 14-01-audit-results.md with sections:
    - Critical Issues (must fix)
    - Warnings (should fix)
    - Passed Checks (what's already good)
    - Notes (observations, not violations)
  </action>
  <verify>
    14-01-audit-results.md exists with categorized findings for all 5 public pages.
    `bun run build` still passes.
  </verify>
  <done>
    Comprehensive audit document exists cataloging all accessibility issues found across all public pages, categorized by severity.
  </done>
</task>

<task type="auto">
  <name>Task 2: Fix all identified accessibility violations</name>
  <files>
    app/globals.css
    app/(home)/page.tsx
    app/services/page.tsx
    app/about/page.tsx
    app/contact/page.tsx
    app/projects/page.tsx
    app/projects/[slug]/page.tsx
    components/portfolio/sections/hero-with-gradient.tsx
    components/portfolio/sections/cta-banner.tsx
    components/portfolio/sections/section-background.tsx
    components/portfolio/social-proof-display.tsx
    components/portfolio/testimonial-card.tsx
    components/portfolio/case-study-visual.tsx
    components/forms/contact-form.tsx
    components/navigation/site-nav.tsx
  </files>
  <action>
    Fix every critical and warning-level issue found in Task 1. Common fixes to apply:

    **Semantic HTML fixes:**
    - Ensure every page has exactly one `<main>` element (some pages like services, about, contact use `<div>` as root - wrap content in `<main>`)
    - Verify `<nav>` element has aria-label if multiple navs exist on page
    - Ensure SectionBackground renders a `<section>` element (check its implementation)
    - Footer: if no `<footer>` exists in the root layout, add one with copyright and nav links

    **Heading hierarchy fixes:**
    - Verify each page starts with h1, followed by h2, h3 in order (no skipping h2 to use h3)
    - Home page: HeroWithGradient has h1, sections should use h2, sub-items h3

    **Contrast fixes (if any regressions found):**
    - Use Chrome DevTools color picker to verify exact ratios
    - Fix in globals.css CSS variables (preferred) or component-level overrides
    - Subtle fixes: slightly darker/lighter text or border colors. Just fix these.
    - muted-foreground text on muted backgrounds is a common failure point - verify ratio

    **ARIA fixes:**
    - Remove redundant ARIA (e.g., `role="navigation"` on `<nav>`)
    - Add `aria-label` to sections that need context (e.g., social proof section)
    - Verify form uses `aria-describedby` for error messages (already implemented in FormControl)

    **Image fixes:**
    - Ensure all `<Image>` components have descriptive `alt` text (not just "screenshot")
    - Decorative images should have `alt=""` and `aria-hidden="true"`

    **Link fixes:**
    - Ensure all links with `target="_blank"` have text indicating they open externally (via sr-only span or aria-label)
    - The project detail page has external links with icons - verify they have accessible names

    After all fixes, run:
    ```
    bun run lint
    bun run type-check
    bun run build
    ```

    Update 14-01-audit-results.md with a "Fixes Applied" section documenting what was changed and why.
  </action>
  <verify>
    `bun run lint` passes with no new warnings.
    `bun run type-check` passes.
    `bun run build` passes.
    Re-inspect pages via Chrome extension to confirm fixes are visible.
  </verify>
  <done>
    All critical and warning accessibility violations are fixed. Every page has proper semantic HTML landmarks, correct heading hierarchy, WCAG AA contrast, and correct ARIA usage. Build passes cleanly.
  </done>
</task>

</tasks>

<verification>
- Every public page uses `<main>` as the content wrapper
- Heading hierarchy is logical on every page (h1 > h2 > h3, no skips)
- No redundant ARIA attributes exist alongside semantic HTML
- All images have appropriate alt text
- All external links indicate they open in a new tab
- `bun run build` passes
- 14-01-audit-results.md documents all findings and fixes
</verification>

<success_criteria>
- Zero critical accessibility violations across all 5 public pages
- All text and UI elements verified for WCAG AA contrast in light mode
- Semantic HTML landmarks present on every page (main, nav, sections)
- Audit results documented with findings and fixes applied
</success_criteria>

<output>
After completion, create `.planning/phases/14-performance-accessibility-validation/14-01-SUMMARY.md`
</output>
