---
phase: 02-projects-home
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - components/portfolio/project-card.tsx
  - components/portfolio/project-grid.tsx
  - components/portfolio/hero-section.tsx
  - components/portfolio/project-filters.tsx
  - app/providers.tsx
autonomous: true

must_haves:
  truths:
    - "ProjectCard displays screenshot, title, description, and status badge"
    - "ProjectGrid renders responsive grid of ProjectCard components"
    - "HeroSection displays WordPress CTA and portfolio navigation"
    - "ProjectFilters manages URL state for tech filtering and sorting"
  artifacts:
    - path: "components/portfolio/project-card.tsx"
      provides: "Reusable project card with image, title, description, status"
      exports: ["ProjectCard"]
    - path: "components/portfolio/project-grid.tsx"
      provides: "Responsive grid layout for project cards"
      exports: ["ProjectGrid"]
    - path: "components/portfolio/hero-section.tsx"
      provides: "Home page hero with dual CTAs"
      exports: ["HeroSection"]
    - path: "components/portfolio/project-filters.tsx"
      provides: "Filter UI with nuqs URL state"
      exports: ["ProjectFilters"]
  key_links:
    - from: "components/portfolio/project-grid.tsx"
      to: "components/portfolio/project-card.tsx"
      via: "import and map"
      pattern: "import.*ProjectCard"
    - from: "components/portfolio/project-filters.tsx"
      to: "nuqs"
      via: "useQueryState hook"
      pattern: "useQueryState"
---

<objective>
Install nuqs for URL state management and create reusable portfolio components (ProjectCard, ProjectGrid, HeroSection, ProjectFilters).

Purpose: These components are shared across home page and projects page. Building them as a separate plan allows parallel execution with Plan 01 (schema/queries).
Output: Four production-ready components ready for page assembly.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-projects-home/02-CONTEXT.md
@.planning/phases/02-projects-home/02-RESEARCH.md

Existing UI components to use:
@components/ui/card.tsx
@components/ui/badge.tsx
@components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install nuqs and configure provider</name>
  <files>package.json, app/providers.tsx</files>
  <action>
1. Install nuqs: `bun add nuqs`

2. Update app/providers.tsx to wrap with NuqsAdapter:

```typescript
"use client";

import { ConvexProvider, ConvexReactClient } from "convex/react";
import { ThemeProvider } from "next-themes";
import { NuqsAdapter } from 'nuqs/adapters/next/app';

const convex = new ConvexReactClient(process.env.NEXT_PUBLIC_CONVEX_URL!);

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <ConvexProvider client={convex}>
      <NuqsAdapter>
        <ThemeProvider
          attribute="class"
          defaultTheme="system"
          enableSystem
          disableTransitionOnChange
        >
          {children}
        </ThemeProvider>
      </NuqsAdapter>
    </ConvexProvider>
  );
}
```

The NuqsAdapter must wrap components that use useQueryState. Place it inside ConvexProvider but outside ThemeProvider.
  </action>
  <verify>Run `bun run type-check` - should pass with nuqs types. Run `bun run dev` briefly to confirm no runtime errors.</verify>
  <done>nuqs installed, NuqsAdapter wrapping app, no runtime errors</done>
</task>

<task type="auto">
  <name>Task 2: Create ProjectCard and ProjectGrid components</name>
  <files>components/portfolio/project-card.tsx, components/portfolio/project-grid.tsx</files>
  <action>
Create components/portfolio/project-card.tsx:

```typescript
import { Card, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import Image from "next/image";
import Link from "next/link";

type ProjectCardProps = {
  project: {
    _id: string;
    name: string;
    slug: string;
    description: string;
    screenshotUrl: string | null;
    status: "live" | "archived" | "in-progress";
  };
};

export function ProjectCard({ project }: ProjectCardProps) {
  const statusVariant = {
    live: "default" as const,
    archived: "secondary" as const,
    "in-progress": "outline" as const,
  };

  return (
    <Link href={`/projects/${project.slug}`}>
      <Card className="overflow-hidden hover:shadow-lg transition-shadow group">
        <div className="relative aspect-video bg-muted">
          {project.screenshotUrl ? (
            <Image
              src={project.screenshotUrl}
              alt={`${project.name} screenshot`}
              fill
              sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
              className="object-cover group-hover:scale-105 transition-transform duration-300"
            />
          ) : (
            <div className="absolute inset-0 flex items-center justify-center text-muted-foreground">
              No preview
            </div>
          )}
        </div>
        <CardHeader>
          <div className="flex items-start justify-between gap-2">
            <CardTitle className="line-clamp-1">{project.name}</CardTitle>
            <Badge variant={statusVariant[project.status]}>
              {project.status}
            </Badge>
          </div>
          <CardDescription className="line-clamp-2">
            {project.description}
          </CardDescription>
        </CardHeader>
      </Card>
    </Link>
  );
}
```

Create components/portfolio/project-grid.tsx:

```typescript
import { ProjectCard } from "./project-card";

type Project = {
  _id: string;
  name: string;
  slug: string;
  description: string;
  screenshotUrl: string | null;
  status: "live" | "archived" | "in-progress";
};

type ProjectGridProps = {
  projects: Project[];
  loading?: boolean;
};

export function ProjectGrid({ projects, loading }: ProjectGridProps) {
  if (loading) {
    return (
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {[...Array(6)].map((_, i) => (
          <div
            key={i}
            className="aspect-video bg-muted animate-pulse rounded-lg"
          />
        ))}
      </div>
    );
  }

  if (projects.length === 0) {
    return (
      <div className="text-center py-12 text-muted-foreground">
        No projects found
      </div>
    );
  }

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {projects.map((project) => (
        <ProjectCard key={project._id} project={project} />
      ))}
    </div>
  );
}
```

Key design decisions per CONTEXT.md:
- Screenshot + title + one-line description (no tech tags on cards)
- Status badges visible on cards
- Hover behavior: subtle scale on image, shadow lift on card
- Grid: 1 col mobile, 2 col tablet, 3 col desktop
  </action>
  <verify>Run `bun run type-check` - both components should have no type errors</verify>
  <done>ProjectCard and ProjectGrid components created with responsive layout and loading states</done>
</task>

<task type="auto">
  <name>Task 3: Create HeroSection and ProjectFilters components</name>
  <files>components/portfolio/hero-section.tsx, components/portfolio/project-filters.tsx</files>
  <action>
Create components/portfolio/hero-section.tsx:

```typescript
import { Button } from "@/components/ui/button";
import Link from "next/link";

export function HeroSection() {
  return (
    <section className="py-20 px-4 text-center">
      <h1 className="text-4xl md:text-5xl font-bold mb-4 text-foreground">
        Professional WordPress Sites from $500
      </h1>
      <p className="text-lg md:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto">
        Fast, mobile-friendly websites for local businesses. Custom development also available.
      </p>
      <div className="flex flex-col sm:flex-row gap-4 justify-center">
        <Button asChild size="lg">
          <Link href="/services">Get Your $500 Site</Link>
        </Button>
        <Button asChild variant="outline" size="lg">
          <Link href="/projects">View Portfolio</Link>
        </Button>
      </div>
    </section>
  );
}
```

Create components/portfolio/project-filters.tsx:

```typescript
"use client";

import { useQueryState, parseAsArrayOf, parseAsString } from "nuqs";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";

type ProjectFiltersProps = {
  availableTechs: string[];
};

export function ProjectFilters({ availableTechs }: ProjectFiltersProps) {
  const [selectedTechs, setSelectedTechs] = useQueryState(
    "tech",
    parseAsArrayOf(parseAsString).withDefault([])
  );
  const [sortBy, setSortBy] = useQueryState(
    "sort",
    parseAsString.withDefault("date")
  );

  const toggleTech = (tech: string) => {
    if (selectedTechs.includes(tech)) {
      setSelectedTechs(selectedTechs.filter((t) => t !== tech));
    } else {
      setSelectedTechs([...selectedTechs, tech]);
    }
  };

  const clearFilters = () => {
    setSelectedTechs([]);
    setSortBy("date");
  };

  const hasFilters = selectedTechs.length > 0 || sortBy !== "date";

  return (
    <div className="mb-8 space-y-4">
      <div className="flex flex-wrap items-center gap-4">
        <div className="flex items-center gap-2">
          <span className="text-sm font-medium text-muted-foreground">Sort:</span>
          <select
            value={sortBy}
            onChange={(e) => setSortBy(e.target.value)}
            className="px-3 py-1.5 rounded-md border bg-background text-sm"
          >
            <option value="date">Newest First</option>
            <option value="name">Alphabetical</option>
          </select>
        </div>

        {hasFilters && (
          <Button variant="ghost" size="sm" onClick={clearFilters}>
            Clear filters
          </Button>
        )}
      </div>

      <div className="flex flex-wrap gap-2">
        <span className="text-sm font-medium text-muted-foreground mr-2 self-center">
          Filter by tech:
        </span>
        {availableTechs.map((tech) => (
          <Badge
            key={tech}
            variant={selectedTechs.includes(tech) ? "default" : "outline"}
            className="cursor-pointer hover:bg-primary/90"
            onClick={() => toggleTech(tech)}
          >
            {tech}
          </Badge>
        ))}
      </div>
    </div>
  );
}
```

Design decisions per CONTEXT.md:
- Pills-based filter UI (badges that toggle)
- Native HTML select element for sort dropdown (no shadcn Select component needed)
- Clear filters button when filters active
- URL state via nuqs: useQueryState hooks sync filter/sort state to URL for shareable filter URLs
  </action>
  <verify>Run `bun run type-check` - both components should compile without errors</verify>
  <done>HeroSection with dual CTAs and ProjectFilters with URL-based tech filtering created</done>
</task>

</tasks>

<verification>
1. Dependencies: `bun run type-check` passes
2. Component structure: All 4 components export their named functions
3. nuqs integration: ProjectFilters uses useQueryState hooks
4. Responsive design: ProjectGrid has mobile/tablet/desktop breakpoints
</verification>

<success_criteria>
- nuqs installed and NuqsAdapter configured in providers
- ProjectCard displays image, title, description, status badge with hover effects
- ProjectGrid renders responsive 1/2/3 column grid with loading state
- HeroSection displays WordPress CTA and portfolio link
- ProjectFilters provides tech filtering with URL state persistence
</success_criteria>

<output>
After completion, create `.planning/phases/02-projects-home/02-02-SUMMARY.md`
</output>
