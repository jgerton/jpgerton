---
phase: 08-design-token-foundation
plan: 03
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - app/(home)/page.tsx
  - app/services/page.tsx
  - app/about/page.tsx
  - app/contact/page.tsx
  - app/projects/page.tsx
  - app/projects/[slug]/page.tsx
  - components/portfolio/hero-section.tsx
  - components/portfolio/project-card.tsx
  - components/portfolio/project-grid.tsx
  - components/portfolio/project-filters.tsx
  - components/pricing/pricing-card.tsx
  - components/pricing/pricing-cards.tsx
  - components/forms/contact-form.tsx
  - components/calendly/calendly-button.tsx
autonomous: true

must_haves:
  truths:
    - "All public-facing pages use token-based spacing (p-xs through p-3xl) with no numeric Tailwind spacing (p-4, py-12, etc.)"
    - "Spacing rhythm follows the 8pt grid consistently across all pages"
    - "No visual regressions occur - pages look substantially the same after migration"
    - "shadcn/ui internal components (select, textarea, toast, honeypot) are left unchanged"
    - "Admin pages are not modified in this plan"
  artifacts:
    - path: "app/(home)/page.tsx"
      provides: "Token-based spacing on home page"
      contains: "p-sm|py-3xl|gap-sm"
    - path: "app/services/page.tsx"
      provides: "Token-based spacing on services page"
      contains: "py-2xl|gap-md|mb-lg"
    - path: "app/about/page.tsx"
      provides: "Token-based spacing on about page"
      contains: "py-2xl|gap-md|mb-lg"
    - path: "app/contact/page.tsx"
      provides: "Token-based spacing on contact page"
      contains: "py-2xl|gap-2xl|mb-2xl"
    - path: "app/projects/page.tsx"
      provides: "Token-based spacing on projects page"
      contains: "py-2xl|gap-sm"
    - path: "components/portfolio/hero-section.tsx"
      provides: "Token-based spacing on hero section"
      contains: "py-3xl|mb-sm|mb-lg"
  key_links:
    - from: "page components"
      to: "@theme spacing tokens"
      via: "Tailwind utility class resolution"
      pattern: "(p|m|gap|py|px|mb|mt|pt|pb|space-y)-(xs|sm|md|lg|xl|2xl|3xl)"
---

<objective>
Migrate all public-facing pages and their key components from numeric Tailwind spacing (p-4, py-12, gap-8, etc.) to the token-based spacing scale (p-sm, py-2xl, gap-lg, etc.) defined in Plan 01. This establishes consistent spacing rhythm across the entire site using the 8pt grid.

Purpose: A token system is only valuable if it's actually used. This plan closes the loop by ensuring every visible spacing decision references the token scale, making future design changes (adjusting the scale) propagate automatically across all pages.

Output: All public-facing pages and their shared components use token-based spacing exclusively. The codebase has zero numeric spacing utilities (p-1 through p-96) on public pages.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-design-token-foundation/08-RESEARCH.md
@.planning/phases/08-design-token-foundation/08-01-SUMMARY.md
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate page-level spacing to tokens</name>
  <files>
    app/(home)/page.tsx
    app/services/page.tsx
    app/about/page.tsx
    app/contact/page.tsx
    app/projects/page.tsx
    app/projects/[slug]/page.tsx
  </files>
  <action>
Apply the following spacing migration map to all public-facing page files. This map rounds numeric Tailwind values to the nearest token on the 8pt grid:

**Migration map (Tailwind numeric to token):**
```
p-1 (4px)    -> p-xs
p-2 (8px)    -> p-sm
p-3 (12px)   -> p-sm     (round 12px down to 8px)
p-4 (16px)   -> p-md
p-6 (24px)   -> p-lg
p-8 (32px)   -> p-xl
p-10 (40px)  -> p-xl     (round 40px down to 32px)
p-12 (48px)  -> p-2xl
p-16 (64px)  -> p-3xl
p-20 (80px)  -> p-3xl    (round 80px down to 64px)
```

This applies to ALL spacing utilities: p-, px-, py-, pt-, pb-, pl-, pr-, m-, mx-, my-, mt-, mb-, ml-, mr-, gap-, space-x-, space-y-.

**Page-specific migrations:**

**app/(home)/page.tsx:**
- `p-4` -> `p-md`
- `py-16 px-4` -> `py-3xl px-md`
- `mb-2` -> `mb-sm`
- `mb-8` -> `mb-xl`

**app/services/page.tsx:**
- `py-12` -> `py-2xl`
- `mb-16` -> `mb-3xl`
- `mb-4` -> `mb-md`
- `mt-20` -> `mt-3xl`
- `mb-8` -> `mb-xl`
- `gap-6` -> `gap-lg`
- `p-6` -> `p-lg`
- `mb-6` -> `mb-lg`
- `mb-2` -> `mb-sm`
- `gap-8` -> `gap-xl`
- `pt-12` -> `pt-2xl`

**app/about/page.tsx:**
- `py-12` -> `py-2xl`
- `mb-12` -> `mb-2xl`
- `mb-4` -> `mb-md`
- `mb-2` -> `mb-sm`
- `gap-6` -> `gap-lg`
- `pt-6` -> `pt-lg`
- `p-8` -> `p-xl`
- `mb-6` -> `mb-lg`
- `gap-4` -> `gap-md`
- `gap-8` -> `gap-xl`
- `pt-12` -> `pt-2xl`
- `mt-12` -> `mt-2xl`
- `mb-1` -> `mb-xs`

**app/contact/page.tsx:**
- `py-12` -> `py-2xl`
- `mb-12` -> `mb-2xl`
- `mb-4` -> `mb-md`
- `gap-12` -> `gap-2xl`
- `space-y-8` -> `space-y-xl`
- `space-y-4` -> `space-y-md`
- `mb-1` -> `mb-xs`

**app/projects/page.tsx:**
- `px-4` -> `px-md`
- `py-4` -> `py-md`
- `py-12 px-4` -> `py-2xl px-md`
- `mb-2` -> `mb-sm`
- `mb-8` -> `mb-xl`
(Apply same changes in the Suspense fallback JSX too)

**app/projects/[slug]/page.tsx:**
Read the file first and apply the same mapping. Migrate all numeric spacing to token equivalents.

**Rules:**
- Do NOT change non-spacing classes (text sizes, font weights, colors, widths, etc.)
- Do NOT change responsive prefixes - keep `sm:`, `md:`, `lg:` but change the value (e.g., `sm:bottom-0` stays as-is since it's a position not spacing)
- Do NOT modify shadcn/ui component internals (Card, Button, etc. have their own spacing)
- Do NOT touch z-index, max-w, min-h, or other non-spacing utilities
- Preserve `max-w-7xl`, `max-w-6xl`, `max-w-5xl`, `max-w-4xl`, etc. as-is (container widths, not spacing tokens)
  </action>
  <verify>
1. Run `bun run build:no-aeo` to verify no build errors
2. Grep all modified page files for numeric spacing patterns (`\bp-\d`, `\bpy-\d`, `\bpx-\d`, `\bmb-\d`, `\bmt-\d`, `\bgap-\d`, `\bspace-y-\d`, `\bpt-\d`, `\bpb-\d`) to confirm zero remaining numeric spacing
3. Run `bun run dev` and visually verify each page looks substantially the same (minor pixel differences acceptable from rounding)
  </verify>
  <done>All 6 public-facing page files use token-based spacing exclusively. No numeric Tailwind spacing utilities remain. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate shared component spacing to tokens</name>
  <files>
    components/portfolio/hero-section.tsx
    components/portfolio/project-card.tsx
    components/portfolio/project-grid.tsx
    components/portfolio/project-filters.tsx
    components/pricing/pricing-card.tsx
    components/pricing/pricing-cards.tsx
    components/forms/contact-form.tsx
    components/calendly/calendly-button.tsx
  </files>
  <action>
Apply the same spacing migration map to shared components used on public-facing pages.

Read each file first, then apply the migration map:
```
p-1/m-1 (4px)    -> xs
p-2/m-2 (8px)    -> sm
p-3/m-3 (12px)   -> sm
p-4/m-4 (16px)   -> md
p-6/m-6 (24px)   -> lg
p-8/m-8 (32px)   -> xl
p-10/m-10 (40px) -> xl
p-12/m-12 (48px) -> 2xl
p-16/m-16 (64px) -> 3xl
p-20/m-20 (80px) -> 3xl
```

**Important exclusions - do NOT modify these files:**
- `components/ui/*` (shadcn/ui primitives - they have their own internal spacing conventions and will be addressed in Phase 9)
- `components/admin/*` (admin components are not public-facing and will be addressed separately)
- `components/forms/honeypot-field.tsx` (uses `-left-[9999px]` for off-screen positioning, not spacing)
- `components/schema/*` (no visible spacing, just JSON-LD markup)
- `components/analytics/*` (no visible UI)

**For each component file:**
1. Read the file
2. Identify all numeric spacing utilities
3. Map to nearest token
4. Write the updated file
5. Preserve all non-spacing classes unchanged

**Special attention:**
- `hero-section.tsx`: `py-20` -> `py-3xl`, `mb-4` -> `mb-md`, `mb-8` -> `mb-xl`, `gap-4` -> `gap-md`
- `project-card.tsx`: Read first to see what spacing exists
- `pricing-card.tsx`: Read first - this likely has card padding and gap values
- `contact-form.tsx`: Read first - forms often have tight spacing (p-2, gap-2) that maps to sm

If a component file has no numeric spacing utilities, skip it (do not modify files unnecessarily).
  </action>
  <verify>
1. Run `bun run build:no-aeo` to verify no build errors
2. Grep all modified component files for remaining numeric spacing patterns
3. Run `bun run dev` and check:
   - Hero section spacing looks correct
   - Project cards have appropriate padding/margins
   - Pricing cards display properly
   - Contact form fields have appropriate spacing
   - No visual regressions
  </verify>
  <done>All public-facing shared components use token-based spacing exclusively. No numeric Tailwind spacing utilities remain in modified files. shadcn/ui primitives and admin components are untouched. Build passes.</done>
</task>

<task type="auto">
  <name>Task 3: Final token consistency verification</name>
  <files></files>
  <action>
Run a comprehensive audit of the migrated codebase:

1. **Grep audit:** Search all public-facing files (app/(home)/, app/services/, app/about/, app/contact/, app/projects/, components/portfolio/, components/pricing/, components/forms/contact-form.tsx, components/calendly/) for any remaining numeric spacing patterns:
   - Pattern: `\b(p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|space-[xy])-\d+\b`
   - Exclude: container widths (max-w-), z-index (z-), text sizes (text-), grid columns (grid-cols-), other non-spacing numerics

2. **Token usage report:** Count how many times each token is used across the migrated files:
   - xs, sm, md, lg, xl, 2xl, 3xl
   - This helps validate that the scale is actually useful (no tokens with 0 usage)

3. **Build verification:** Run `bun run build:no-aeo` one final time

4. **Type check:** Run `bun run type-check` to ensure no TypeScript errors were introduced

If any numeric spacing values are found in step 1, fix them using the migration map. If any token has 0 usage, document it (it may become useful in later phases).
  </action>
  <verify>
1. Grep audit returns zero numeric spacing patterns in public-facing files
2. Build passes cleanly
3. Type check passes
4. Token usage report shows reasonable distribution across the scale
  </verify>
  <done>Zero numeric spacing utilities remain in public-facing code. All token sizes are in use or documented as reserved for future phases. Build and type-check pass. Spacing rhythm across the site follows the 8pt grid consistently.</done>
</task>

</tasks>

<verification>
1. `bun run build:no-aeo` passes with zero errors
2. `bun run type-check` passes with zero errors
3. Grep for `\b(p|m|gap|space)-\d+\b` in public-facing files returns zero matches
4. All public pages render with consistent spacing rhythm
5. No visual regressions (pages look substantially the same, minor pixel rounding acceptable)
6. shadcn/ui components and admin pages are untouched
</verification>

<success_criteria>
- All 6 public-facing pages use token-based spacing exclusively
- All shared components (portfolio, pricing, forms, calendly) use token-based spacing
- Zero numeric Tailwind spacing utilities in public-facing code
- 8pt grid rhythm (xs=4, sm=8, md=16, lg=24, xl=32, 2xl=48, 3xl=64) applied consistently
- Build and type-check pass
- No visual regressions
</success_criteria>

<output>
After completion, create `.planning/phases/08-design-token-foundation/08-03-SUMMARY.md`
</output>
