---
phase: 09-component-variant-extensions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/ui/button.tsx
  - components/ui/card.tsx
autonomous: true

must_haves:
  truths:
    - "Buttons render in five distinct hierarchy levels (primary, secondary, tertiary, gradient, outline) each visually distinguishable"
    - "Buttons render in three sizes (default, lg, xl) with xl noticeably larger for hero CTAs"
    - "Gradient button shows a subtle shimmer effect on hover (background-position shift, not bold rainbow)"
    - "Cards render at four elevation levels (flat, sm, md, lg) with visible shadow progression"
    - "Card lg variant shows hover transition with shadow lift and slight scale (approximately 1.02x)"
    - "All existing Button and Card usages continue to work without changes (backward compatible)"
  artifacts:
    - path: "components/ui/button.tsx"
      provides: "Button with 5 hierarchy variants + 3 sizes + compound variants"
      exports: ["Button", "buttonVariants"]
      contains: "gradient"
    - path: "components/ui/card.tsx"
      provides: "Card with 4 elevation variants via CVA"
      exports: ["Card", "cardVariants", "CardHeader", "CardTitle", "CardDescription", "CardContent", "CardFooter"]
      contains: "cardVariants"
  key_links:
    - from: "components/ui/button.tsx"
      to: "class-variance-authority"
      via: "cva import"
      pattern: "cva\\("
    - from: "components/ui/card.tsx"
      to: "class-variance-authority"
      via: "cva import for new cardVariants"
      pattern: "cardVariants.*cva\\("
---

<objective>
Extend Button and Card components with type-safe CVA variants for visual hierarchy.

Purpose: Create the core interactive component variants that express visual hierarchy. Buttons get 5 levels (primary/secondary/tertiary/gradient/outline) and 3 sizes (default/lg/xl). Cards get 4 elevation levels (flat/sm/md/lg) with hover transitions on lg. These are the most-used UI primitives, and proper variants eliminate ad-hoc className overrides across the site.

Output: Updated button.tsx and card.tsx with full CVA variant systems, backward compatible with all existing usages.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-component-variant-extensions/09-CONTEXT.md
@.planning/phases/09-component-variant-extensions/09-RESEARCH.md
@components/ui/button.tsx
@components/ui/card.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend Button with hierarchy variants and sizes</name>
  <files>components/ui/button.tsx</files>
  <action>
Rewrite the buttonVariants CVA definition in button.tsx to include 5 hierarchy levels and 3 sizes while maintaining backward compatibility.

**Variant mapping (replaces current variants):**
- `primary` (replaces current `default`): `bg-primary text-primary-foreground hover:bg-primary/90 transition-colors duration-[var(--duration-base)]`
- `secondary`: `bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors duration-[var(--duration-base)]`
- `tertiary`: `bg-muted text-muted-foreground hover:bg-muted/80 transition-colors duration-[var(--duration-base)]`
- `gradient`: Subtle shimmer effect using oversized gradient with background-position transition. Use `bg-gradient-to-r from-primary via-tech-blue to-primary bg-[length:200%_100%] bg-[position:0%_0%] hover:bg-[position:100%_0%] transition-[background-position] duration-[var(--duration-slow)] ease-smooth` with `text-primary-foreground`
- `outline`: `border border-input bg-background hover:bg-accent hover:text-accent-foreground transition-colors duration-[var(--duration-base)]`

**Keep these existing variants unchanged** (backward compatibility):
- `destructive`: Keep as-is
- `ghost`: Keep as-is
- `link`: Keep as-is

**Size variants:**
- `default`: `h-10 px-4 py-2` (unchanged)
- `sm`: `h-9 rounded-md px-3` (unchanged)
- `lg`: `h-11 rounded-md px-8` (unchanged)
- `xl`: `h-14 rounded-md px-12 text-lg` (new, for hero CTAs)
- `icon`: `h-10 w-10` (unchanged)

**Compound variants:**
- gradient + xl: add `px-16` for visual balance at large size
- outline + lg/xl: add `border-2` for visual weight at larger sizes

**Default variants:** Change `variant: "default"` to `variant: "primary"`. Also add a `default` alias that maps to the same classes as `primary` for backward compatibility with existing code that uses `variant="default"` or omits the variant prop.

**Important:** Add `transition-colors duration-[var(--duration-base)]` to the base classes string so ALL variants get smooth transitions. Remove redundant transition-colors from individual variants if it's in the base. Keep the gradient variant's transition override (`transition-[background-position]`) since it needs a different property.

Do NOT change the component signature, forwardRef pattern, or exports. The ButtonProps interface and Button component remain unchanged.
  </action>
  <verify>
Run `bun run build` to confirm no TypeScript errors. Grep for existing Button usages (`variant="default"`, `variant="outline"`, `variant="secondary"`, `variant="ghost"`, `variant="destructive"`, `variant="link"`) and confirm none would break. The build should succeed with zero errors.
  </verify>
  <done>
button.tsx exports buttonVariants with all 5 hierarchy variants (primary, secondary, tertiary, gradient, outline) plus existing variants (destructive, ghost, link), 5 size variants (default, sm, lg, xl, icon), compound variants for gradient+xl and outline+lg/xl, and defaultVariants set to variant:"primary". Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Card elevation system with CVA variants</name>
  <files>components/ui/card.tsx</files>
  <action>
Convert the Card component from direct className to CVA-powered elevation variants while keeping all sub-components (CardHeader, CardTitle, CardDescription, CardContent, CardFooter) unchanged.

**Add imports at top:**
- `import { cva, type VariantProps } from "class-variance-authority";`

**Create cardVariants:**
```
const cardVariants = cva(
  "rounded-lg bg-card text-card-foreground",
  {
    variants: {
      elevation: {
        flat: "border border-border shadow-none",
        sm: "border border-border shadow-sm",
        md: "border border-border shadow-md",
        lg: [
          "border border-border shadow-lg",
          "transition-[transform,box-shadow] duration-[var(--duration-base)] ease-smooth",
          "hover:shadow-xl hover:scale-[1.02]",
        ].join(" "),
      },
    },
    defaultVariants: {
      elevation: "sm",
    },
  }
);
```

**Shadow progression rationale:** flat=none, sm=shadow-sm, md=shadow-md, lg=shadow-lg with xl reserved for lg hover state. This keeps it subtle and "approachable professional."

**Update Card component:**
- Add `CardProps` interface extending `React.HTMLAttributes<HTMLDivElement>` and `VariantProps<typeof cardVariants>`
- Update Card forwardRef to destructure `elevation` from props
- Use `cn(cardVariants({ elevation, className }))` instead of manual className
- Export `cardVariants` alongside existing exports

**Default behavior:** `elevation: "sm"` matches the current Card styling (border + shadow-sm), so existing Card usages without an elevation prop will look identical.

**Do NOT modify** CardHeader, CardTitle, CardDescription, CardContent, CardFooter. They remain unchanged.

**Dark mode surface:** The existing `bg-card` token (0 0% 12% in dark mode, defined in globals.css) provides the slightly lighter surface automatically. No additional dark mode handling needed.
  </action>
  <verify>
Run `bun run build` to confirm no TypeScript errors. Verify that existing Card usages (grep for `<Card` across the codebase) would render identically since defaultVariants elevation="sm" produces the same visual as the current "border bg-card text-card-foreground shadow-sm".
  </verify>
  <done>
card.tsx exports cardVariants with 4 elevation levels (flat, sm, md, lg). The lg variant includes hover:shadow-xl and hover:scale-[1.02] with GPU-friendly transitions. Default elevation is "sm" for backward compatibility. All sub-components unchanged. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `bun run build` completes with zero errors
2. All existing component usages are backward compatible:
   - `<Button>` renders as primary (same visual as old default)
   - `<Button variant="outline">` renders outline (unchanged)
   - `<Button variant="ghost">` renders ghost (unchanged)
   - `<Button variant="destructive">` renders destructive (unchanged)
   - `<Card>` renders with elevation="sm" (same visual as before)
3. New variants are available:
   - `<Button variant="gradient">` renders gradient shimmer
   - `<Button variant="tertiary">` renders muted style
   - `<Button size="xl">` renders larger button
   - `<Card elevation="flat">` renders flat card
   - `<Card elevation="lg">` renders card with hover effects
</verification>

<success_criteria>
- Button has 8 variant options (primary, secondary, tertiary, gradient, outline, destructive, ghost, link)
- Button has 5 size options (default, sm, lg, xl, icon)
- Card has 4 elevation options (flat, sm, md, lg) with hover on lg
- Build passes with zero errors
- No existing component usage breaks
</success_criteria>

<output>
After completion, create `.planning/phases/09-component-variant-extensions/09-01-SUMMARY.md`
</output>
