---
phase: 10-typography-color-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/fonts.ts
  - app/layout.tsx
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "Lora renders as the serif font on any element using font-serif class"
    - "Inter remains the default sans-serif body font"
    - "Fluid type tokens (text-h1 through text-sm) scale smoothly between mobile and desktop without breakpoint jumps"
    - "Line height tokens exist for tight (1.1), snug (1.2), normal (1.5), and relaxed (1.6)"
    - "Hero-sized text token exists at 60-72px desktop range"
  artifacts:
    - path: "lib/fonts.ts"
      provides: "Centralized Lora + Inter font definitions with CSS variables"
      exports: ["inter", "lora"]
    - path: "app/layout.tsx"
      provides: "Both font variables applied to html element"
      contains: "lora.variable"
    - path: "app/globals.css"
      provides: "Fluid type scale tokens and font-serif mapping in @theme"
      contains: "--font-serif"
  key_links:
    - from: "lib/fonts.ts"
      to: "app/layout.tsx"
      via: "named imports inter, lora"
      pattern: "import.*from.*@/lib/fonts"
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "CSS variable --font-lora set on html element, consumed by @theme"
      pattern: "lora\\.variable"
    - from: "app/globals.css"
      to: "Tailwind utilities"
      via: "@theme --font-serif references --font-lora variable"
      pattern: "--font-serif.*var\\(--font-lora\\)"
---

<objective>
Integrate Lora variable font alongside Inter, define a complete fluid typography scale using CSS clamp(), and establish line height tokens in the Tailwind v4 @theme configuration.

Purpose: This creates the typography foundation that all pages will consume. Lora (serif) is the display/headline font for warm personality, Inter (sans) remains the body/UI font. Fluid sizing eliminates breakpoint jumps and scales smoothly from mobile to desktop.

Output: lib/fonts.ts, updated layout.tsx with both font variables, globals.css with fluid type scale and font-serif mapping.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-typography-color-system/10-CONTEXT.md
@.planning/phases/10-typography-color-system/10-RESEARCH.md
@app/globals.css
@app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create lib/fonts.ts and update layout.tsx with Lora + Inter</name>
  <files>lib/fonts.ts, app/layout.tsx</files>
  <action>
    Create `lib/fonts.ts` with centralized font definitions:

    ```typescript
    import { Inter, Lora } from 'next/font/google';

    export const inter = Inter({
      subsets: ['latin'],
      display: 'swap',
      variable: '--font-inter',
    });

    export const lora = Lora({
      subsets: ['latin'],
      display: 'swap',
      variable: '--font-lora',
      // Variable font handles weight range automatically
      // Usage weights: 500 (Medium) for most headlines, 600 (SemiBold) for H1 emphasis
    });
    ```

    Update `app/layout.tsx`:
    - Change the import from `import { Inter } from "next/font/google"` to `import { inter, lora } from "@/lib/fonts"`
    - Remove the existing inline `const inter = Inter({...})` definition
    - Update the html className from `{inter.variable}` to `{`${inter.variable} ${lora.variable}`}`
    - Keep everything else (body className="font-sans antialiased", Providers, SiteNav, Analytics, etc.) unchanged

    Important: Do NOT use `font-variation-settings` for weight. Use standard `font-weight` CSS property. The variable font automatically supports the weight range.
  </action>
  <verify>
    Run `bun run build` and confirm no build errors. Verify lib/fonts.ts exports both `inter` and `lora`. Verify layout.tsx html element includes both CSS variables.
  </verify>
  <done>
    Lora and Inter are both loaded via next/font/google with CSS variables --font-lora and --font-inter. Both variables are applied to the html element. Build passes with no errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Define fluid type scale, font-serif mapping, and line height tokens in @theme</name>
  <files>app/globals.css</files>
  <action>
    Update the `@theme` block in `app/globals.css` to add font-serif mapping, fluid type scale, and line height tokens.

    Add to the existing @theme block (after the existing --font-sans line):

    ```css
    /* Font family - serif for display/headlines (Lora) */
    --font-serif: var(--font-lora), ui-serif, Georgia, serif;
    ```

    Add fluid type scale tokens using clamp(). Use 1.2x tight ratio per CONTEXT.md decisions. Viewport range: 400px (mobile) to 1280px (desktop). The formula is: clamp(minRem, vwSlope + remIntercept, maxRem) where slope = (max - min) / (maxVw - minVw) * 100 and intercept = min - (slope/100 * minVw).

    Computed values for the scale (verify math carefully):

    ```css
    /* ===== FLUID TYPOGRAPHY SCALE (1.2x ratio, 400-1280px viewport) ===== */
    /* Hero H1: 60px mobile -> 72px desktop (special, larger than scale) */
    --font-size-hero: clamp(3.75rem, 1.364vw + 3.409rem, 4.5rem);
    /* H1: 40px -> 52px */
    --font-size-h1: clamp(2.5rem, 1.364vw + 2.159rem, 3.25rem);
    /* H2: 33px -> 43px */
    --font-size-h2: clamp(2.063rem, 1.136vw + 1.778rem, 2.688rem);
    /* H3: 28px -> 36px */
    --font-size-h3: clamp(1.75rem, 0.909vw + 1.523rem, 2.25rem);
    /* H4: 23px -> 30px (Inter, not Lora) */
    --font-size-h4: clamp(1.438rem, 0.795vw + 1.239rem, 1.875rem);
    /* H5: 19px -> 25px (Inter) */
    --font-size-h5: clamp(1.188rem, 0.682vw + 1.017rem, 1.563rem);
    /* H6: 16px -> 21px (Inter) */
    --font-size-h6: clamp(1rem, 0.568vw + 0.858rem, 1.313rem);
    /* Body base: 16px -> 18px */
    --font-size-base: clamp(1rem, 0.227vw + 0.943rem, 1.125rem);
    /* Small: 14px -> 16px */
    --font-size-sm: clamp(0.875rem, 0.227vw + 0.818rem, 1rem);
    /* Extra small: 12px -> 14px */
    --font-size-xs: clamp(0.75rem, 0.227vw + 0.693rem, 0.875rem);
    ```

    Add line height tokens:

    ```css
    /* ===== LINE HEIGHT TOKENS ===== */
    /* Scale inversely with font size: larger text needs tighter line height */
    --leading-tight: 1.1;     /* H1, H2, hero headings */
    --leading-snug: 1.25;     /* H3, H4 */
    --leading-normal: 1.5;    /* Body text */
    --leading-relaxed: 1.6;   /* Long-form content, prose */
    ```

    IMPORTANT:
    - Keep ALL existing @theme tokens (spacing, shadows, animation, easing, radius, --font-sans). Only ADD new entries.
    - Place font-serif right after the existing --font-sans line.
    - Place fluid type scale and line heights as new sections after the existing border radius section.
    - Do NOT remove or modify any existing token values.
    - Do NOT create duplicate entries for things already defined (e.g., --font-sans is already there).
  </action>
  <verify>
    Run `bun run build` and confirm no build errors. Grep globals.css for `--font-serif`, `--font-size-hero`, `--font-size-h1`, `--leading-tight` to confirm all tokens are present. Test that `font-serif` Tailwind utility resolves by checking a test element.
  </verify>
  <done>
    globals.css @theme block contains: --font-serif mapping to Lora, 10 fluid type size tokens (hero, h1-h6, base, sm, xs) using clamp(), and 4 line height tokens (tight, snug, normal, relaxed). Build passes. All existing tokens remain intact.
  </done>
</task>

</tasks>

<verification>
1. `bun run build` completes without errors
2. `lib/fonts.ts` exists and exports inter and lora
3. `app/layout.tsx` html element has both `inter.variable` and `lora.variable` classes
4. `app/globals.css` @theme block contains --font-serif, all fluid type tokens, and line height tokens
5. Applying `class="font-serif"` to an element renders in Lora (verify in browser)
6. Existing site appearance is unchanged (no visual regressions since we only added tokens, did not apply them to pages yet)
</verification>

<success_criteria>
- Lora variable font is loaded and available via `font-serif` Tailwind utility
- Inter remains the default body font via `font-sans`
- Fluid type scale tokens (hero, h1 through xs) are defined with clamp() in @theme
- Line height tokens (tight, snug, normal, relaxed) are defined in @theme
- Build passes with zero errors
- No visual regressions on existing pages (tokens are defined but not yet applied)
</success_criteria>

<output>
After completion, create `.planning/phases/10-typography-color-system/10-01-SUMMARY.md`
</output>
