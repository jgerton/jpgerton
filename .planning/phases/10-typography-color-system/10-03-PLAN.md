---
phase: 10-typography-color-system
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "Amber/gold accent color is available as a semantic token for CTAs and highlights"
    - "Dark mode uses warm blue-gray backgrounds (not pure black/neutral gray) with color elevation for surfaces"
    - "All new and existing color pairs pass WCAG AA contrast (4.5:1 text, 3:1 UI)"
    - "Dark mode surfaces show visible elevation hierarchy (background lighter than before, card lighter than background, popover lighter than card)"
    - "Amber/gold accent renders richer and warmer in dark mode than in light mode"
  artifacts:
    - path: "app/globals.css"
      provides: "Amber/gold accent tokens, warm dark mode backgrounds, color elevation, WCAG-verified contrast"
      contains: "--accent-warm"
  key_links:
    - from: "app/globals.css :root"
      to: "WCAG AA"
      via: "All text colors have 4.5:1+ contrast against their backgrounds"
      pattern: "contrast"
    - from: "app/globals.css .dark"
      to: "color elevation"
      via: "Background -> card -> popover use incremental HSL lightness"
      pattern: "220 15%"
    - from: "app/globals.css @theme inline"
      to: "Tailwind utilities"
      via: "--color-accent-warm maps to bg-accent-warm, text-accent-warm-foreground"
      pattern: "--color-accent-warm"
---

<objective>
Add a warm amber/gold accent color to the palette, transform dark mode from neutral black to warm blue-gray with Material Design-inspired color elevation, and verify WCAG AA contrast for all color pairs in both themes.

Purpose: The amber/gold accent complements the existing cool blue/turquoise palette and will be used for CTAs and highlights (Phase 13 will apply it to specific elements). Warm dark mode creates a premium, intentional feel rather than generic inversion. Color elevation gives dark mode surfaces clear visual hierarchy.

Output: Updated globals.css with amber/gold accent tokens, warm dark mode backgrounds, color elevation, and documented WCAG AA contrast ratios for every color pair.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-typography-color-system/10-CONTEXT.md
@.planning/phases/10-typography-color-system/10-RESEARCH.md
@.planning/phases/08-design-token-foundation/08-02-SUMMARY.md
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add amber/gold accent color and define warm dark mode with color elevation</name>
  <files>app/globals.css</files>
  <action>
    Update `app/globals.css` to add the amber/gold accent and transform dark mode to warm blue-gray with color elevation. This task modifies the @layer base section (CSS variables) and the @theme inline section (Tailwind utility mappings).

    **Step 1: Add amber/gold accent to :root (light mode)**

    Add after the existing `--ring` variable in `:root`:

    ```css
    /* Warm accent - amber/gold for CTAs and highlights */
    --accent-warm: 38 92% 50%;            /* #D97706-ish honey gold */
    --accent-warm-foreground: 0 0% 100%;  /* White text on amber */
    ```

    Starting value: HSL 38 92% 50%. This needs WCAG AA testing. If contrast of white text on this amber background is below 4.5:1, darken the amber (reduce lightness to 45% or 42%) until it passes. Document the final ratio in a comment.

    If white text fails on amber (likely - amber is a medium-lightness color), use dark text instead:
    ```css
    --accent-warm-foreground: 0 0% 10%;   /* Dark text on amber - higher contrast */
    ```

    Test both options and pick the one that passes WCAG AA (4.5:1 for text). The foreground choice determines how CTA buttons will look.

    **Step 2: Transform dark mode to warm blue-gray with color elevation**

    Replace the dark mode base colors. Current dark mode uses neutral grays (`0 0% 10%`, `0 0% 12%`, etc.). Change to warm blue-gray:

    ```css
    .dark {
      /* Base - warm blue-gray, NOT pure black */
      --background: 220 15% 10%;      /* ~#161A1D - warm blue-gray base */
      --foreground: 210 20% 95%;      /* ~#F0F3F5 - slightly cool white for readability */

      /* Color elevation: lighter = higher surface */
      --card: 220 15% 13%;            /* ~#1E2225 - elevated from background (+3%) */
      --card-foreground: 210 20% 95%; /* Same foreground for consistency */

      --popover: 220 15% 16%;         /* ~#262B30 - more elevated (+6% from bg) */
      --popover-foreground: 210 20% 95%;

      /* Muted surfaces follow elevation pattern */
      --muted: 220 15% 15%;           /* ~#232830 - between card and popover */
      --muted-foreground: 210 10% 65%; /* ~#9CA5AD - subtle text */
    ```

    Keep the existing primary, secondary, accent, destructive values for dark mode (these were already WCAG-verified in 08-02). Only change the base surface colors and their foregrounds.

    **Step 3: Add amber/gold accent for dark mode**

    In the `.dark` block, add after the existing accent variables:

    ```css
    /* Warm accent - richer, warmer amber in dark mode */
    --accent-warm: 38 95% 55%;            /* Brighter amber for dark backgrounds */
    --accent-warm-foreground: 0 0% 10%;   /* Dark text on bright amber */
    ```

    The dark mode amber should be brighter (higher lightness) than light mode to stand out against dark surfaces. Test WCAG AA contrast of dark text (10% lightness) on this amber background.

    **Step 4: Add @theme inline mappings for the new accent**

    In the `@theme inline` block, add after the existing `--color-ring` line:

    ```css
    /* Warm accent (amber/gold) */
    --color-accent-warm: hsl(var(--accent-warm));
    --color-accent-warm-foreground: hsl(var(--accent-warm-foreground));
    ```

    This creates Tailwind utilities: `bg-accent-warm`, `text-accent-warm`, `text-accent-warm-foreground`, `border-accent-warm`.

    **Step 5: WCAG AA verification**

    For every modified color pair, calculate the contrast ratio and document it in a comment next to the variable. Use the WCAG relative luminance formula:
    - L = 0.2126 * R + 0.7152 * G + 0.0722 * B (where R, G, B are linearized)
    - Contrast = (L1 + 0.05) / (L2 + 0.05)

    Required minimums:
    - Text on background: 4.5:1
    - UI elements on background: 3:1

    Pairs to verify:
    1. Light: foreground on background (already passing, verify unchanged)
    2. Light: accent-warm-foreground on accent-warm (NEW - must pass 4.5:1)
    3. Light: muted-foreground on background (already passing, verify unchanged)
    4. Dark: foreground on background (CHANGED - verify passes)
    5. Dark: card-foreground on card (CHANGED - verify passes)
    6. Dark: popover-foreground on popover (CHANGED - verify passes)
    7. Dark: muted-foreground on muted (CHANGED - verify passes)
    8. Dark: accent-warm-foreground on accent-warm (NEW - must pass 4.5:1)
    9. Dark: foreground on card (cross-surface text - verify passes)
    10. Dark: foreground on muted (cross-surface text - verify passes)

    If any pair fails, adjust the specific color value until it passes. Document all adjustments.

    IMPORTANT CONSTRAINTS:
    - Do NOT modify the existing primary, secondary, accent (turquoise), or destructive colors in either theme. These were verified in 08-02.
    - Do NOT change the @theme static block (spacing, shadows, etc.). Only modify @layer base (:root and .dark) and @theme inline.
    - Do NOT change admin-specific colors (--admin-bg, --admin-sidebar, --admin-border). Leave those as-is.
    - Keep all existing inline comments for non-modified variables. Update comments only for changed values.
  </action>
  <verify>
    Run `bun run build` to confirm no errors. Verify all color pairs pass WCAG AA by checking the contrast ratio comments. Test in browser: switch between light and dark mode to verify:
    1. Dark mode background has a visible warm blue tint (not pure black)
    2. Dark mode cards appear slightly lighter than the background (elevation visible)
    3. Amber/gold accent is visible and readable in both themes
    4. Existing brand colors (blue, turquoise) still look correct
    5. No white-on-white or black-on-black text anywhere
  </verify>
  <done>
    globals.css contains amber/gold accent tokens (--accent-warm, --accent-warm-foreground) in both themes. Dark mode uses warm blue-gray (220 15% 10%) with color elevation (+3% per surface level). All color pairs have documented WCAG AA contrast ratios. Tailwind utilities bg-accent-warm, text-accent-warm, text-accent-warm-foreground are available. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify WCAG AA compliance for complete color system and document results</name>
  <files>app/globals.css</files>
  <action>
    Create a comprehensive WCAG AA verification pass over the ENTIRE color system (not just new colors). This ensures nothing was broken by the dark mode surface color changes.

    Write a verification script or manually compute contrast ratios for ALL foreground/background pairs in both themes. Use the relative luminance formula:

    ```
    For each HSL color -> convert to RGB -> linearize -> compute luminance
    L = 0.2126 * Rlin + 0.7152 * Glin + 0.0722 * Blin
    Contrast = (lighter_L + 0.05) / (darker_L + 0.05)
    ```

    **Light mode pairs to verify (minimum 4.5:1 for text):**
    1. foreground on background
    2. card-foreground on card
    3. popover-foreground on popover
    4. primary-foreground on primary
    5. secondary-foreground on secondary
    6. muted-foreground on background (important: muted text on white)
    7. accent-foreground on accent
    8. destructive-foreground on destructive
    9. accent-warm-foreground on accent-warm (NEW)

    **Dark mode pairs to verify (minimum 4.5:1 for text):**
    Same 9 pairs as above, using .dark values.

    **Cross-surface dark mode pairs (minimum 4.5:1):**
    10. foreground on card (text readable on cards)
    11. foreground on muted (text readable on muted surfaces)
    12. foreground on popover (text readable on popovers)

    **UI element pairs (minimum 3:1):**
    13. border on background (light mode)
    14. border on background (dark mode)
    15. input on background (both modes)

    For each pair, add or update the inline comment with the contrast ratio and a pass/fail indicator:
    ```css
    --foreground: 210 20% 95%; /* ~#F0F3F5 - (XX.X:1 on background) */
    ```

    If ANY pair fails, fix it immediately by adjusting the failing color's lightness/saturation. Re-verify after each fix. If a fix creates a cascade (changing one color breaks another pair), resolve all cascading failures before moving on.

    After all pairs pass, add a summary comment block at the top of the @layer base section:

    ```css
    /* ===== COLOR SYSTEM - WCAG AA VERIFIED =====
     * All foreground/background pairs: 4.5:1+ (text)
     * All UI element pairs: 3:1+ (borders, inputs)
     * Light mode: X pairs verified
     * Dark mode: X pairs verified
     * Last verified: [date]
     * ============================================ */
    ```
  </action>
  <verify>
    Run `bun run build` to confirm no errors. Every color variable in both :root and .dark should have a contrast ratio comment. The summary block should list the total verified pairs. Switch between light/dark mode in browser and verify no readability issues on any page.
  </verify>
  <done>
    Complete color system verified for WCAG AA compliance. All text foreground/background pairs exceed 4.5:1 contrast ratio. All UI element pairs exceed 3:1. Summary comment documents the verification. No contrast failures remain. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `bun run build` completes without errors
2. `bg-accent-warm` Tailwind utility is available and renders amber/gold
3. Dark mode background has warm blue-gray tint (220 hue), not neutral black (0 hue)
4. Dark mode surfaces show visible elevation: background < card < popover (lighter is higher)
5. Amber/gold accent is visible and legible in both light and dark modes
6. All existing brand colors (primary blue, secondary blue, turquoise accent) render correctly in both themes
7. WCAG AA contrast ratios documented for every foreground/background pair
8. No contrast ratio below 4.5:1 for text, 3:1 for UI elements
</verification>

<success_criteria>
- Amber/gold accent color (--accent-warm) is defined in both light and dark themes with WCAG AA compliant foreground
- Dark mode base uses warm blue-gray (HSL ~220 15% 10%) not neutral black
- Color elevation is visible: background -> card -> popover shows progressive lightening in dark mode
- Every color pair in the system has documented WCAG AA contrast ratio
- Zero contrast failures in either theme
- Existing colors (primary, secondary, accent/turquoise, destructive) are unchanged and still passing
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/10-typography-color-system/10-03-SUMMARY.md`
</output>
