---
phase: 05-seo-aeo-performance
plan: 04
type: execute
wave: 2
depends_on: ["05-02"]
files_modified:
  - app/sitemap.ts
  - app/robots.ts
  - app/services/page.tsx
  - app/page.tsx
  - app/about/page.tsx
autonomous: true

must_haves:
  truths:
    - "sitemap.xml includes all public pages and dynamic project URLs"
    - "robots.txt allows crawling of public pages, blocks /admin and /api"
    - "Services page displays FAQ section with answers"
    - "FAQ content has speakable markup via CSS class"
    - "Schema components render on appropriate pages"
  artifacts:
    - path: "app/sitemap.ts"
      provides: "Dynamic sitemap generation"
      exports: ["default"]
    - path: "app/robots.ts"
      provides: "robots.txt configuration"
      exports: ["default"]
  key_links:
    - from: "app/sitemap.ts"
      to: "convex/projects"
      via: "fetchQuery for dynamic URLs"
      pattern: "api\\.projects"
    - from: "app/services/page.tsx"
      to: "components/schema/faq-schema.tsx"
      via: "FAQSchema import"
      pattern: "FAQSchema"
---

<objective>
Create dynamic sitemap and robots.txt, add FAQ section to services page with schema markup, and integrate schema components into pages.

Purpose: Enable search engine crawling and indexing, improve AI assistant discoverability through FAQ with speakable markup.
Output: Working sitemap.xml, robots.txt, FAQ section on services page with JSON-LD schema.
</objective>

<execution_context>
@C:\Users\jonge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\jonge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-seo-aeo-performance/05-RESEARCH.md
@.planning/phases/05-seo-aeo-performance/05-02-SUMMARY.md
@components/schema/index.ts
@app/services/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dynamic sitemap and robots.txt</name>
  <files>
    app/sitemap.ts
    app/robots.ts
  </files>
  <action>
Create sitemap.ts for dynamic sitemap generation:

**app/sitemap.ts:**
```typescript
import type { MetadataRoute } from "next";
import { fetchQuery } from "convex/nextjs";
import { api } from "@/convex/_generated/api";

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || "https://jpgerton.com";

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  // Static pages
  const staticPages: MetadataRoute.Sitemap = [
    {
      url: BASE_URL,
      lastModified: new Date(),
      changeFrequency: "weekly",
      priority: 1,
    },
    {
      url: `${BASE_URL}/services`,
      lastModified: new Date(),
      changeFrequency: "monthly",
      priority: 0.9,
    },
    {
      url: `${BASE_URL}/projects`,
      lastModified: new Date(),
      changeFrequency: "weekly",
      priority: 0.8,
    },
    {
      url: `${BASE_URL}/about`,
      lastModified: new Date(),
      changeFrequency: "monthly",
      priority: 0.7,
    },
    {
      url: `${BASE_URL}/contact`,
      lastModified: new Date(),
      changeFrequency: "yearly",
      priority: 0.6,
    },
  ];

  // Dynamic project pages
  let projectPages: MetadataRoute.Sitemap = [];
  try {
    const projects = await fetchQuery(api.projects.list, {});
    projectPages = projects.map((project) => ({
      url: `${BASE_URL}/projects/${project.slug}`,
      lastModified: new Date(project._creationTime),
      changeFrequency: "monthly" as const,
      priority: 0.7,
    }));
  } catch {
    // If Convex unavailable during build, skip dynamic pages
    console.warn("Sitemap: Could not fetch projects from Convex");
  }

  return [...staticPages, ...projectPages];
}
```

**app/robots.ts:**
```typescript
import type { MetadataRoute } from "next";

const BASE_URL = process.env.NEXT_PUBLIC_SITE_URL || "https://jpgerton.com";

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: "*",
      allow: "/",
      disallow: ["/admin/", "/api/", "/login"],
    },
    sitemap: `${BASE_URL}/sitemap.xml`,
  };
}
```

The sitemap:
- Lists all static pages with appropriate priorities
- Dynamically includes all project detail pages from Convex
- Handles build-time failures gracefully (Convex may not be available)

The robots.txt:
- Allows all public pages
- Blocks /admin, /api, and /login routes
- References the sitemap location
  </action>
  <verify>
- `bun run build` succeeds
- Visit /sitemap.xml in browser - shows XML with all pages
- Visit /robots.txt in browser - shows rules with sitemap reference
  </verify>
  <done>Dynamic sitemap.ts and robots.ts created with proper configuration.</done>
</task>

<task type="auto">
  <name>Task 2: Add FAQ section to services page with schema markup</name>
  <files>app/services/page.tsx</files>
  <action>
Update the services page to include a comprehensive FAQ section with speakable markup:

1. Import FAQSchema and ServiceSchema from components/schema
2. Define FAQ questions and answers as data
3. Add FAQ section UI between the pricing cards and trust section
4. Render FAQSchema component with questions
5. Render ServiceSchema component for service offerings

**FAQ Data to add:**
```typescript
const faqData = [
  {
    question: "How long does it take to build a $500 WordPress site?",
    answer: "Most WordPress sites are delivered within 5 business days from when I receive your content and payment. Complex requirements may take slightly longer.",
  },
  {
    question: "What's included in the $500 WordPress package?",
    answer: "You get a professional 5-7 page website with mobile-responsive design, contact form, Google Maps integration, basic SEO setup, one round of revisions, and 30 days of support after launch.",
  },
  {
    question: "Do I need to provide my own hosting?",
    answer: "You'll need hosting and a domain name. I can recommend affordable options ($50-100/year total) and help you get set up if needed.",
  },
  {
    question: "Can I update the website myself after it's built?",
    answer: "Yes! WordPress is designed for easy content updates. I'll provide a brief training on how to edit text, add images, and make basic changes.",
  },
  {
    question: "What if I need changes after the site is launched?",
    answer: "You get one round of revisions included. After that, I offer maintenance packages or hourly rates for additional updates and changes.",
  },
  {
    question: "Do you work with businesses outside the Anchorage area?",
    answer: "Absolutely! While I started helping local Anchorage businesses, I work with clients across the US. Everything can be done remotely via video calls and email.",
  },
];
```

**FAQ Section UI (add after pricing cards, before trust section):**
```tsx
{/* FAQ Section */}
<div className="mt-20">
  <h2 className="text-2xl font-semibold mb-8 text-center">
    Frequently Asked Questions
  </h2>
  <div className="grid gap-6 max-w-3xl mx-auto">
    {faqData.map((faq, index) => (
      <div key={index} className="border rounded-lg p-6">
        <h3 className="font-medium mb-2">{faq.question}</h3>
        <p className="text-muted-foreground faq-answer">{faq.answer}</p>
      </div>
    ))}
  </div>
</div>

{/* Schema Markup */}
<FAQSchema questions={faqData} />
<ServiceSchema />
```

Note: The `faq-answer` CSS class is referenced in the speakable markup for AI assistants.
  </action>
  <verify>
- `bun run type-check` passes
- Services page shows FAQ section
- View source shows JSON-LD for FAQPage and Service
  </verify>
  <done>Services page has FAQ section with 6 questions, FAQSchema, and ServiceSchema.</done>
</task>

<task type="auto">
  <name>Task 3: Add schema components to home and about pages</name>
  <files>
    app/page.tsx
    app/about/page.tsx
  </files>
  <action>
Integrate schema components into the home and about pages:

**app/page.tsx:**
Add LocalBusinessSchema to home page:
```typescript
import { LocalBusinessSchema } from "@/components/schema";

// Inside the component, after the closing </section>:
<LocalBusinessSchema />
```

**app/about/page.tsx:**
Add PersonSchema to about page:
```typescript
import { PersonSchema } from "@/components/schema";

// Inside the component, at the end before closing </div>:
<PersonSchema />
```

This places structured data where it's most contextually relevant:
- LocalBusiness on home (main entry point)
- Person on about (personal branding)
- Service + FAQ on services (service offerings)
  </action>
  <verify>
- `bun run type-check` passes
- Home page source shows LocalBusiness JSON-LD
- About page source shows Person JSON-LD
- Google Rich Results Test validates all schemas
  </verify>
  <done>Schema components integrated into home (LocalBusiness) and about (Person) pages.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `bun run type-check` passes
2. `bun run build` succeeds
3. Test sitemap: curl https://localhost:3400/sitemap.xml
4. Test robots: curl https://localhost:3400/robots.txt
5. Services page shows FAQ section with 6 Q&As
6. View source on:
   - Home page: LocalBusiness JSON-LD present
   - About page: Person JSON-LD present
   - Services page: FAQPage + Service JSON-LD present
7. Validate schemas at https://validator.schema.org/
</verification>

<success_criteria>
- [ ] /sitemap.xml lists all static pages and dynamic project pages
- [ ] /robots.txt blocks /admin, /api, /login and references sitemap
- [ ] Services page has FAQ section with 6 questions
- [ ] FAQ answers have faq-answer CSS class for speakable
- [ ] Home page renders LocalBusinessSchema
- [ ] About page renders PersonSchema
- [ ] Services page renders FAQSchema and ServiceSchema
- [ ] All JSON-LD validates without errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-seo-aeo-performance/05-04-SUMMARY.md`
</output>
